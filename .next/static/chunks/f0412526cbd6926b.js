(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66931,e=>{"use strict";let t=(0,e.i(82896).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],66931)},98089,e=>{"use strict";let t=(0,e.i(82896).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],98089)},10052,e=>{"use strict";let t=(0,e.i(82896).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],10052)},29346,e=>{"use strict";let t=(0,e.i(82896).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],29346)},88370,e=>{"use strict";var t=e.i(845),s=e.i(44345),a=e.i(842),r=e.i(29840),d=e.i(98089),l=e.i(82896);let i=(0,l.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var c=e.i(18076);let n=(0,l.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),o=(0,l.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),x=(0,l.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var m=e.i(66931),h=e.i(10052),u=e.i(29346);function p(){let[e,l]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[f,j]=(0,s.useState)("all"),[b,v]=(0,s.useState)(!0),[y,N]=(0,s.useState)(null),[k,w]=(0,s.useState)({total:0,carfax:0,autocheck:0,chineseApi:0,contact:0}),{token:A}=(0,a.useSelector)(e=>e.auth),C=(0,s.useCallback)(async()=>{v(!0),N(null);try{let e=await fetch("/api/leads",{headers:{Authorization:`Bearer ${A}`}});if(!e.ok){if(403===e.status)throw Error("You do not have permission to view leads");if(401===e.status)throw Error("Please log in to view leads");throw Error("Failed to fetch leads")}let t=await e.json();l(t.data.leads),w(t.data.stats)}catch(e){N(e instanceof Error?e.message:"Failed to load leads")}finally{v(!1)}},[A]);(0,s.useEffect)(()=>{A&&C()},[A,C]),(0,s.useEffect)(()=>{"all"===f?g(e):g(e.filter(e=>e.source===f))},[e,f]);let M=async e=>{if(confirm("Are you sure you want to delete this lead?"))try{if(!(await fetch(`/api/leads/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${A}`}})).ok)throw Error("Failed to delete lead");C()}catch(e){alert(e instanceof Error?e.message:"Failed to delete lead")}},z=async()=>{alert("To delete all leads, please delete them individually for safety.")},S=e=>{switch(e){case"carfax":return"Carfax API";case"autocheck":return"AutoCheck API";case"chinese-api":return"China Vehicle API";default:return e}};return y?(0,t.jsx)("div",{className:"p-8",children:(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[(0,t.jsx)(u.AlertCircle,{className:"w-12 h-12 mx-auto text-red-500 mb-3"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-1",children:"Error"}),(0,t.jsx)("p",{className:"text-red-600",children:y}),(0,t.jsx)("button",{onClick:C,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Try Again"})]})}):(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Lead Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"View and manage all demo requests and inquiries"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition",children:[(0,t.jsx)(x,{size:16}),"Refresh"]}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([["Name,Email,Phone,Company,Source,Message,Date",...p.map(e=>`"${e.name}","${e.email}","${e.phone}","${e.company}","${e.source}","${e.message.replace(/"/g,'""')}","${new Date(e.createdAt).toLocaleString()}"`)].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=`leads_${new Date().toISOString().split("T")[0]}.csv`,t.click()},disabled:0===p.length,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:[(0,t.jsx)(m.Download,{size:16}),"Export CSV"]}),(0,t.jsxs)("button",{onClick:z,disabled:0===e.length,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition disabled:opacity-50",children:[(0,t.jsx)(o,{size:16}),"Clear All"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-purple-100 text-purple-600 p-2 rounded-lg",children:(0,t.jsx)(r.Users,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.total}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Leads"})]})]})}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-red-100 text-red-600 p-2 rounded-lg",children:(0,t.jsx)(r.Users,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.carfax}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Carfax"})]})]})}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:(0,t.jsx)(r.Users,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.autocheck}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"AutoCheck"})]})]})}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-orange-100 text-orange-600 p-2 rounded-lg",children:(0,t.jsx)(r.Users,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:k.chineseApi}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"China API"})]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)(h.Filter,{size:16,className:"text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Filter by source:"}),(0,t.jsxs)("select",{value:f,onChange:e=>j(e.target.value),className:"bg-card border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"all",children:"All Sources"}),(0,t.jsx)("option",{value:"carfax",children:"Carfax API"}),(0,t.jsx)("option",{value:"autocheck",children:"AutoCheck API"}),(0,t.jsx)("option",{value:"chinese-api",children:"China Vehicle API"})]})]}),b?(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,t.jsx)(x,{className:"w-8 h-8 animate-spin mx-auto text-muted-foreground mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading leads..."})]}):0===p.length?(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,t.jsx)(r.Users,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"No leads yet"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"all"===f?"When visitors submit demo requests, they will appear here.":`No leads from ${S(f)} yet.`})]}):(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Contact Info"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Company"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Source"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Message"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Date"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:p.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/30 transition",children:[(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[(0,t.jsx)(d.Mail,{size:12}),(0,t.jsx)("a",{href:`mailto:${e.email}`,className:"hover:text-purple-600",children:e.email})]}),e.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[(0,t.jsx)(i,{size:12}),(0,t.jsx)("a",{href:`tel:${e.phone}`,className:"hover:text-purple-600",children:e.phone})]})]})}),(0,t.jsx)("td",{className:"px-4 py-4",children:e.company?(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(c.Building2,{size:14,className:"text-muted-foreground"}),(0,t.jsx)("span",{children:e.company})]}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"—"})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"carfax":return"bg-red-100 text-red-700";case"autocheck":return"bg-blue-100 text-blue-700";case"chinese-api":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}})(e.source)}`,children:S(e.source)})}),(0,t.jsx)("td",{className:"px-4 py-4 max-w-xs",children:e.message?(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.message}):(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"—"})}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,t.jsx)(n,{size:12}),(0,t.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("button",{onClick:()=>M(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete lead",children:(0,t.jsx)(o,{size:16})})})]},e.id))})]})})})]})}e.s(["default",()=>p],88370)}]);