{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uMAAO,EAAC,IAAA,8KAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        \"relative flex size-8 shrink-0 overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,2NAAC,2MAAoB;QACnB,aAAU;QACV,WAAW,IAAA,0JAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,2NAAC,4MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,0JAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,2NAAC,+MAAwB;QACvB,aAAU;QACV,WAAW,IAAA,0JAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/app/redux/features/auth/authApis.ts"],"sourcesContent":["import { baseApi } from \"../../apis/baseApi\";\n\nexport const authApi = baseApi.injectEndpoints({\n  endpoints: (builder) => ({\n    login: builder.mutation({\n      query: (body) => ({\n        url: \"/auth/login\",\n        method: \"POST\",\n        body,\n      }),\n      invalidatesTags: [\"Auth\"],\n    }),\n    register: builder.mutation({\n      query: (body) => ({\n        url: \"/auth/register\",\n        method: \"POST\",\n        body,\n      }),\n      invalidatesTags: [\"Auth\"],\n    }),\n\n    profile: builder.query({\n      query: () => ({\n        url: \"/auth/me\",\n        method: \"GET\",\n      }),\n      providesTags: [\"User\"],\n    }),\n  }),\n});\n\nexport const { useRegisterMutation, useLoginMutation, useProfileQuery } = authApi;\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAM,UAAU,kLAAO,CAAC,eAAe,CAAC;IAC7C,WAAW,CAAC,UAAY,CAAC;YACvB,OAAO,QAAQ,QAAQ,CAAC;gBACtB,OAAO,CAAC,OAAS,CAAC;wBAChB,KAAK;wBACL,QAAQ;wBACR;oBACF,CAAC;gBACD,iBAAiB;oBAAC;iBAAO;YAC3B;YACA,UAAU,QAAQ,QAAQ,CAAC;gBACzB,OAAO,CAAC,OAAS,CAAC;wBAChB,KAAK;wBACL,QAAQ;wBACR;oBACF,CAAC;gBACD,iBAAiB;oBAAC;iBAAO;YAC3B;YAEA,SAAS,QAAQ,KAAK,CAAC;gBACrB,OAAO,IAAM,CAAC;wBACZ,KAAK;wBACL,QAAQ;oBACV,CAAC;gBACD,cAAc;oBAAC;iBAAO;YACxB;QACF,CAAC;AACH;AAEO,MAAM,EAAE,mBAAmB,EAAE,gBAAgB,EAAE,eAAe,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/components/DashboardComponents/Header/Header.tsx"],"sourcesContent":["\"use client\"\n\nimport { Bell, LogOut, Settings, User } from 'lucide-react'\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useProfileQuery } from '@/app/redux/features/auth/authApis'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { logout } from '@/app/redux/features/auth/authSlice'\nimport { toast } from 'sonner'\nimport { RootState } from '@/app/redux/store'\n\nexport function Header() {\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false)\n  const router = useRouter()\n  const dispatch = useDispatch()\n\n  // Get state from Redux\n  const { impersonating } = useSelector((state: RootState) => state.auth)\n\n  // Fetch user profile\n  const { data: profileData, isLoading: isProfileLoading, error } = useProfileQuery(undefined)\n\n  console.log(profileData);\n  console.log(error);\n\n\n  const handleLogout = () => {\n    try {\n      dispatch(logout())\n      toast.success('Logged out successfully')\n      router.push('/auth/login')\n    } catch (err) {\n      console.error('Logout failed:', err)\n      toast.error('Logout failed. Please try again.')\n    }\n  }\n\n  const handleStopImpersonation = () => {\n    dispatch({ type: 'auth/stopImpersonation' })\n    toast.success('Stopped impersonation')\n    router.push('/dashboard/franchises/manage')\n  }\n\n  // Get user initials for avatar fallback\n  const getInitials = (name: string) => {\n    if (!name) return 'U'\n    return name\n      .split(' ')\n      .map(n => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2)\n  }\n\n  // Extract user data from profile response\n  const user = profileData?.data?.user || null\n\n  return (\n    <header className=\"bg-card border-b border-border px-6 py-4 flex items-center justify-between\">\n      <div className=\"flex items-center gap-3\">\n        {/* Impersonation Banner */}\n        {impersonating && (\n          <div className=\"bg-orange-100 border border-orange-300 text-orange-800 px-4 py-2 rounded-lg flex items-center gap-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-2 h-2 bg-orange-500 rounded-full animate-pulse\"></div>\n              <span className=\"text-sm font-semibold\">\n                Viewing Franchise (View-Only Mode)\n              </span>\n            </div>\n            <button\n              onClick={handleStopImpersonation}\n              className=\"text-xs font-medium px-3 py-1 bg-orange-200 hover:bg-orange-300 rounded transition\"\n            >\n              Exit View Mode\n            </button>\n          </div>\n        )}\n\n        {/* Franchise Context (for franchise users) */}\n        {user?.franchise && !impersonating && (\n          <div className=\"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-2 rounded-lg\">\n            <div className=\"text-xs font-medium\">Franchise</div>\n            <div className=\"text-sm font-semibold\">{user.franchise.name}</div>\n          </div>\n        )}\n      </div>\n      <div className=\"flex items-center gap-4\">\n        <button className=\"p-2 hover:bg-muted rounded-lg transition-colors\">\n          <Bell size={20} />\n        </button>\n\n        <div className=\"relative pl-4 border-l border-border\">\n          <button\n            onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n            className=\"flex items-center gap-3 hover:opacity-80 transition-opacity\"\n            disabled={isProfileLoading}\n          >\n            <div className=\"text-right\">\n              <div className=\"font-semibold text-sm\">\n                {isProfileLoading ? 'Loading...' : user?.name || 'User'}\n              </div>\n              <div className=\"text-xs text-muted-foreground\">\n                {user?.role || 'Member'}\n              </div>\n            </div>\n            <Avatar className=\"w-10 h-10\">\n              <AvatarImage src={user?.avatar} />\n              <AvatarFallback>{getInitials(user?.name || 'User')}</AvatarFallback>\n            </Avatar>\n          </button>\n\n          {/* Dropdown Menu */}\n          {isDropdownOpen && (\n            <>\n              {/* Backdrop */}\n              <div\n                className=\"fixed inset-0 z-10\"\n                onClick={() => setIsDropdownOpen(false)}\n              />\n\n              {/* Dropdown Content */}\n              <div className=\"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-20\">\n                {/* User Info */}\n                <div className=\"px-4 py-3 border-b border-gray-100\">\n                  <p className=\"text-sm font-semibold text-gray-900\">{user?.name || 'User'}</p>\n                  <p className=\"text-xs text-gray-500 truncate\">{user?.email || 'No email'}</p>\n                </div>\n\n                {/* Menu Items */}\n                <div className=\"py-1\">\n                  <button\n                    className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors\"\n                    onClick={() => {\n                      setIsDropdownOpen(false)\n                      // Add profile navigation if needed\n                    }}\n                  >\n                    <User size={16} />\n                    Profile\n                  </button>\n                  <button\n                    className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors\"\n                    onClick={() => {\n                      setIsDropdownOpen(false)\n                      // Add settings navigation if needed\n                    }}\n                  >\n                    <Settings size={16} />\n                    Settings\n                  </button>\n                </div>\n\n                {/* Logout */}\n                <div className=\"border-t border-gray-100 mt-1 pt-1\">\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <LogOut size={16} />\n                    Logout\n                  </button>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 519, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/types/auth.types.ts"],"sourcesContent":["// User Roles\nexport enum UserRole {\n  SUPER_ADMIN = 'super_admin',\n  FRANCHISE_ADMIN = 'franchise_admin',\n  FRANCHISE_USER = 'franchise_user'\n}\n\n// Permissions\nexport enum Permission {\n  // Franchise Management\n  VIEW_ALL_FRANCHISES = 'view_all_franchises',\n  MANAGE_FRANCHISES = 'manage_franchises',\n  VIEW_OWN_FRANCHISE = 'view_own_franchise',\n\n  // Billing & Pricing\n  VIEW_ALL_BILLING = 'view_all_billing',\n  MANAGE_ALL_PRICING = 'manage_all_pricing',\n  VIEW_OWN_BILLING = 'view_own_billing',\n  MANAGE_OWN_BILLING = 'manage_own_billing',\n  TOPUP_CREDITS = 'topup_credits',\n\n  // User Management\n  MANAGE_FRANCHISE_USERS = 'manage_franchise_users',\n\n  // Reports & Analytics\n  VIEW_ALL_REPORTS = 'view_all_reports',\n  VIEW_FRANCHISE_REPORTS = 'view_franchise_reports',\n  VIEW_OWN_REPORTS = 'view_own_reports',\n\n  // Activity Monitoring\n  VIEW_ALL_ACTIVITY = 'view_all_activity',\n  VIEW_FRANCHISE_ACTIVITY = 'view_franchise_activity',\n\n  // API Management\n  MANAGE_ALL_API = 'manage_all_api',\n  MANAGE_FRANCHISE_API = 'manage_franchise_api',\n\n  // Impersonation\n  IMPERSONATE_FRANCHISE = 'impersonate_franchise'\n}\n\n// Franchise Interface\nexport interface Franchise {\n  id: string\n  name: string\n  country: string\n  email: string\n  status: 'active' | 'inactive' | 'suspended'\n  plan: 'pay-as-you-go' | 'professional' | 'enterprise'\n  balance: number\n  apiCalls: number\n  joined: string\n}\n\n// User Interface\nexport interface User {\n  id: string\n  name: string\n  email: string\n  role: UserRole\n  franchiseId?: string | null  // null for super admins\n  franchise?: Franchise | null  // Populated franchise data\n  avatar?: string | null\n  permissions?: Permission[]\n  createdAt?: string\n  updatedAt?: string\n}\n\n// Auth State\nexport interface AuthState {\n  token: string | null\n  user: User | null\n  isAuthenticated: boolean\n  isLoading: boolean\n  impersonating?: {\n    originalUser: User\n    franchiseId: string\n    viewOnly: boolean\n  } | null\n}\n\n// Login Credentials\nexport interface LoginCredentials {\n  email: string\n  password: string\n}\n\n// Register Data\nexport interface RegisterData {\n  name: string\n  email: string\n  password: string\n  role?: UserRole\n  franchiseId?: string\n}\n\n// Auth Response\nexport interface AuthResponse {\n  token: string\n  user: User\n}\n\n// Role Check Result\nexport interface RoleCheckResult {\n  hasAccess: boolean\n  redirectTo?: string\n  message?: string\n}\n"],"names":[],"mappings":"AAAA,aAAa;;;;;;;AACN,IAAA,AAAK,kCAAA;;;;WAAA;;AAOL,IAAA,AAAK,oCAAA;IACV,uBAAuB;;;;IAKvB,oBAAoB;;;;;;IAOpB,kBAAkB;;IAGlB,sBAAsB;;;;IAKtB,sBAAsB;;;IAItB,iBAAiB;;;IAIjB,gBAAgB;;WA7BN","debugId":null}},
    {"offset": {"line": 566, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/lib/permissions.ts"],"sourcesContent":["import { User, UserRole, Permission } from '@/types/auth.types'\n\n// Role to Permissions Mapping\nexport const ROLE_PERMISSIONS: Record<UserRole, Permission[]> = {\n  [UserRole.SUPER_ADMIN]: [\n    Permission.VIEW_ALL_FRANCHISES,\n    Permission.MANAGE_FRANCHISES,\n    Permission.VIEW_ALL_BILLING,\n    Permission.MANAGE_ALL_PRICING,\n    Permission.VIEW_ALL_REPORTS,\n    Permission.VIEW_ALL_ACTIVITY,\n    Permission.MANAGE_ALL_API,\n    Permission.IMPERSONATE_FRANCHISE,\n    Permission.TOPUP_CREDITS,\n    Permission.MANAGE_FRANCHISE_USERS\n  ],\n  [UserRole.FRANCHISE_ADMIN]: [\n    Permission.VIEW_OWN_FRANCHISE,\n    Permission.VIEW_OWN_BILLING,\n    Permission.MANAGE_OWN_BILLING,\n    Permission.TOPUP_CREDITS,\n    Permission.MANAGE_FRANCHISE_USERS,\n    Permission.VIEW_FRANCHISE_REPORTS,\n    Permission.VIEW_FRANCHISE_ACTIVITY,\n    Permission.MANAGE_FRANCHISE_API\n  ],\n  [UserRole.FRANCHISE_USER]: [\n    Permission.VIEW_OWN_REPORTS\n  ]\n}\n\n// Check if user has a specific permission\nexport const hasPermission = (user: User | null, permission: Permission): boolean => {\n  if (!user) return false\n\n  // Check user's role permissions\n  const rolePermissions = ROLE_PERMISSIONS[user.role] || []\n\n  // Also check if user has explicit permissions\n  const userPermissions = user.permissions || []\n\n  return rolePermissions.includes(permission) || userPermissions.includes(permission)\n}\n\n// Check if user has any of the permissions\nexport const hasAnyPermission = (user: User | null, permissions: Permission[]): boolean => {\n  if (!user) return false\n  return permissions.some(permission => hasPermission(user, permission))\n}\n\n// Check if user has all permissions\nexport const hasAllPermissions = (user: User | null, permissions: Permission[]): boolean => {\n  if (!user) return false\n  return permissions.every(permission => hasPermission(user, permission))\n}\n\n// Role checking helpers\nexport const isSuperAdmin = (user: User | null): boolean => {\n  return user?.role === UserRole.SUPER_ADMIN\n}\n\nexport const isFranchiseAdmin = (user: User | null): boolean => {\n  return user?.role === UserRole.FRANCHISE_ADMIN\n}\n\nexport const isFranchiseUser = (user: User | null): boolean => {\n  return user?.role === UserRole.FRANCHISE_USER\n}\n\n// Check if user can access a specific franchise\nexport const canAccessFranchise = (user: User | null, franchiseId: string): boolean => {\n  if (!user) return false\n\n  // Super admins can access all franchises\n  if (isSuperAdmin(user)) return true\n\n  // Franchise admins and users can only access their own franchise\n  return user.franchiseId === franchiseId\n}\n\n// Check if user can manage franchise users\nexport const canManageFranchiseUsers = (user: User | null, franchiseId?: string): boolean => {\n  if (!user) return false\n\n  // Super admins can manage all users\n  if (isSuperAdmin(user)) return true\n\n  // Franchise admins can manage users in their franchise\n  if (isFranchiseAdmin(user) && franchiseId) {\n    return user.franchiseId === franchiseId\n  }\n\n  return false\n}\n\n// Check if user can view billing\nexport const canViewBilling = (user: User | null): boolean => {\n  return hasAnyPermission(user, [\n    Permission.VIEW_ALL_BILLING,\n    Permission.VIEW_OWN_BILLING\n  ])\n}\n\n// Check if user can manage pricing\nexport const canManagePricing = (user: User | null): boolean => {\n  return hasPermission(user, Permission.MANAGE_ALL_PRICING)\n}\n\n// Check if user can top up credits\nexport const canTopUpCredits = (user: User | null, franchiseId?: string): boolean => {\n  if (!user) return false\n\n  if (isSuperAdmin(user)) return true\n\n  if (isFranchiseAdmin(user) && franchiseId) {\n    return user.franchiseId === franchiseId\n  }\n\n  return false\n}\n\n// Check if user can impersonate\nexport const canImpersonate = (user: User | null): boolean => {\n  return hasPermission(user, Permission.IMPERSONATE_FRANCHISE)\n}\n\n// Get user's accessible routes\nexport const getAccessibleRoutes = (user: User | null): string[] => {\n  if (!user) return []\n\n  const routes: string[] = ['/dashboard']\n\n  if (isSuperAdmin(user)) {\n    return [\n      '/dashboard',\n      '/dashboard/franchises',\n      '/dashboard/franchises/manage',\n      '/dashboard/leads',\n      '/dashboard/billing',\n      '/dashboard/pricing',\n      '/dashboard/activity',\n      '/dashboard/reports',\n      '/dashboard/api',\n      '/dashboard/terms'\n    ]\n  }\n\n  if (isFranchiseAdmin(user)) {\n    return [\n      '/dashboard',\n      '/dashboard/billing',\n      '/dashboard/activity',\n      '/dashboard/reports',\n      '/dashboard/api'\n    ]\n  }\n\n  if (isFranchiseUser(user)) {\n    return [\n      '/dashboard',\n      '/dashboard/reports'\n    ]\n  }\n\n  return routes\n}\n\n// Check if user can access route\nexport const canAccessRoute = (user: User | null, route: string): boolean => {\n  const accessibleRoutes = getAccessibleRoutes(user)\n\n  // Check exact match\n  if (accessibleRoutes.includes(route)) return true\n\n  // Check if route starts with any accessible route (for nested routes)\n  return accessibleRoutes.some(accessibleRoute =>\n    route.startsWith(accessibleRoute) && route !== accessibleRoute\n  )\n}\n\n// Get default route for user role\nexport const getDefaultRoute = (user: User | null): string => {\n  if (!user) return '/auth/login'\n\n  if (isSuperAdmin(user)) return '/dashboard/franchises/manage'\n  if (isFranchiseAdmin(user)) return '/dashboard'\n  if (isFranchiseUser(user)) return '/dashboard/reports'\n\n  return '/dashboard'\n}\n\n// Get redirect route if user doesn't have access\nexport const getRedirectRoute = (user: User | null): string => {\n  return getDefaultRoute(user)\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/components/DashboardComponents/Sidebar/Sidebar.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '@/app/redux/store'\nimport { cn } from '@/lib/utils'\nimport { canAccessRoute } from '@/lib/permissions'\nimport {\n  LayoutDashboard,\n  Building2,\n  FileText,\n  Zap,\n  Package,\n  FileCheck,\n  DollarSign,\n  Activity,\n  Users,\n  UserCheck,\n} from 'lucide-react'\n\nconst allNavItems = [\n  {\n    href: '/dashboard',\n    label: 'Dashboard',\n    icon: LayoutDashboard,\n    roles: ['super_admin', 'franchise_admin', 'franchise_user']\n  },\n  {\n    href: '/dashboard/franchises',\n    label: 'Franchises',\n    icon: Building2,\n    roles: ['super_admin']\n  },\n  {\n    href: '/dashboard/franchises/manage',\n    label: 'Manage Franchises',\n    icon: Users,\n    roles: ['super_admin']\n  },\n  {\n    href: '/dashboard/leads',\n    label: 'Leads',\n    icon: UserCheck,\n    roles: ['super_admin']\n  },\n  {\n    href: '/dashboard/billing',\n    label: 'Billing',\n    icon: DollarSign,\n    roles: ['super_admin', 'franchise_admin']\n  },\n  {\n    href: '/dashboard/activity',\n    label: 'Activity',\n    icon: Activity,\n    roles: ['super_admin', 'franchise_admin']\n  },\n  {\n    href: '/dashboard/reports',\n    label: 'Reports',\n    icon: FileText,\n    roles: ['super_admin', 'franchise_admin', 'franchise_user']\n  },\n  {\n    href: '/dashboard/api',\n    label: 'API',\n    icon: Zap,\n    roles: ['super_admin', 'franchise_admin']\n  },\n  {\n    href: '/dashboard/pricing',\n    label: 'Pricing & Packages',\n    icon: Package,\n    roles: ['super_admin']\n  },\n  {\n    href: '/dashboard/terms',\n    label: 'Terms & Conditions',\n    icon: FileCheck,\n    roles: ['super_admin']\n  },\n]\n\nexport function Sidebar() {\n  const pathname = usePathname()\n  const { user } = useSelector((state: RootState) => state.auth)\n\n  // Filter nav items based on user's role and permissions\n  const navItems = allNavItems.filter(item => {\n    if (!user) return false\n    return canAccessRoute(user, item.href)\n  })\n\n  return (\n    <aside className=\"w-56 bg-card border-r border-border flex flex-col h-screen\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-8 h-8 bg-primary rounded-md flex items-center justify-center text-primary-foreground font-bold\">\n            G\n          </div>\n          <div>\n            <h1 className=\"text-lg font-semibold\">GlobalVIN</h1>\n            {user && (\n              <p className=\"text-xs text-muted-foreground capitalize\">\n                {user.role.replace('_', ' ')}\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <nav className=\"flex-1 p-4 space-y-2\">\n        {navItems.map((item) => {\n          const Icon = item.icon\n\n          const isActive =\n            item.href === '/dashboard'\n              ? pathname === '/dashboard'\n              : pathname.startsWith(item.href)\n\n          return (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={cn(\n                'flex items-center gap-3 px-4 py-3 rounded-lg transition-colors',\n                isActive\n                  ? 'bg-[#764BA2] text-primary-foreground'\n                  : 'text-foreground hover:bg-muted'\n              )}\n            >\n              <Icon size={20} />\n              <span className=\"text-sm font-medium\">{item.label}</span>\n            </Link>\n          )\n        })}\n      </nav>\n\n      {/* Franchise Context (for franchise users) */}\n      {user && user.franchise && (\n        <div className=\"p-4 border-t border-border\">\n          <div className=\"text-xs text-muted-foreground mb-1\">Franchise</div>\n          <div className=\"font-semibold text-sm\">{user.franchise.name}</div>\n          <div className=\"text-xs text-muted-foreground mt-1\">{user.franchise.country}</div>\n        </div>\n      )}\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AARA;;;;;;;AAqBA,MAAM,cAAc;IAClB;QACE,MAAM;QACN,OAAO;QACP,MAAM,gRAAe;QACrB,OAAO;YAAC;YAAe;YAAmB;SAAiB;IAC7D;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,8PAAS;QACf,OAAO;YAAC;SAAc;IACxB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,8OAAK;QACX,OAAO;YAAC;SAAc;IACxB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,8PAAS;QACf,OAAO;YAAC;SAAc;IACxB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,iQAAU;QAChB,OAAO;YAAC;YAAe;SAAkB;IAC3C;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,uPAAQ;QACd,OAAO;YAAC;YAAe;SAAkB;IAC3C;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,2PAAQ;QACd,OAAO;YAAC;YAAe;YAAmB;SAAiB;IAC7D;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,wOAAG;QACT,OAAO;YAAC;YAAe;SAAkB;IAC3C;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,oPAAO;QACb,OAAO;YAAC;SAAc;IACxB;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM,8PAAS;QACf,OAAO;YAAC;SAAc;IACxB;CACD;AAEM,SAAS;;IACd,MAAM,WAAW,IAAA,kLAAW;IAC5B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yMAAW;+BAAC,CAAC,QAAqB,MAAM,IAAI;;IAE7D,wDAAwD;IACxD,MAAM,WAAW,YAAY,MAAM,CAAC,CAAA;QAClC,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,IAAA,4KAAc,EAAC,MAAM,KAAK,IAAI;IACvC;IAEA,qBACE,2NAAC;QAAM,WAAU;;0BACf,2NAAC;gBAAI,WAAU;0BACb,cAAA,2NAAC;oBAAI,WAAU;;sCACb,2NAAC;4BAAI,WAAU;sCAAmG;;;;;;sCAGlH,2NAAC;;8CACC,2NAAC;oCAAG,WAAU;8CAAwB;;;;;;gCACrC,sBACC,2NAAC;oCAAE,WAAU;8CACV,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK;;;;;;;;;;;;;;;;;;;;;;;0BAOlC,2NAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC;oBACb,MAAM,OAAO,KAAK,IAAI;oBAEtB,MAAM,WACJ,KAAK,IAAI,KAAK,eACV,aAAa,eACb,SAAS,UAAU,CAAC,KAAK,IAAI;oBAEnC,qBACE,2NAAC,wMAAI;wBAEH,MAAM,KAAK,IAAI;wBACf,WAAW,IAAA,0JAAE,EACX,kEACA,WACI,yCACA;;0CAGN,2NAAC;gCAAK,MAAM;;;;;;0CACZ,2NAAC;gCAAK,WAAU;0CAAuB,KAAK,KAAK;;;;;;;uBAV5C,KAAK,IAAI;;;;;gBAapB;;;;;;YAID,QAAQ,KAAK,SAAS,kBACrB,2NAAC;gBAAI,WAAU;;kCACb,2NAAC;wBAAI,WAAU;kCAAqC;;;;;;kCACpD,2NAAC;wBAAI,WAAU;kCAAyB,KAAK,SAAS,CAAC,IAAI;;;;;;kCAC3D,2NAAC;wBAAI,WAAU;kCAAsC,KAAK,SAAS,CAAC,OAAO;;;;;;;;;;;;;;;;;;AAKrF;GAjEgB;;QACG,kLAAW;QACX,yMAAW;;;KAFd","debugId":null}},
    {"offset": {"line": 1025, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/components/ProtectedRoute/ProtectedRoute.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect } from 'react'\nimport { useRouter, usePathname } from 'next/navigation'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '@/app/redux/store'\nimport { toast } from 'sonner'\nimport { canAccessRoute, getRedirectRoute } from '@/lib/permissions'\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode\n  requireRole?: boolean  // If true, check role-based access\n}\n\nexport function ProtectedRoute({ children, requireRole = false }: ProtectedRouteProps) {\n  const router = useRouter()\n  const pathname = usePathname()\n  const { token, user, isAuthenticated } = useSelector((state: RootState) => state.auth)\n\n  useEffect(() => {\n    // Check if user is authenticated\n    if (!token || !isAuthenticated) {\n      toast.error('Please login to access this page')\n      router.push(`/auth/login?redirect=${pathname}`)\n      return\n    }\n\n    // If role checking is required, check if user can access this route\n    if (requireRole && user) {\n      if (!canAccessRoute(user, pathname)) {\n        const redirectTo = getRedirectRoute(user)\n        toast.error('You do not have permission to access this page')\n        router.push(redirectTo)\n      }\n    }\n  }, [token, isAuthenticated, user, pathname, router, requireRole])\n\n  // If no token, return null (will redirect anyway)\n  if (!token || !isAuthenticated) {\n    return null\n  }\n\n  // If role checking is required and user doesn't have access, return null\n  if (requireRole && user && !canAccessRoute(user, pathname)) {\n    return null\n  }\n\n  // If authenticated (and authorized if required), render children\n  return <>{children}</>\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;;;AAPA;;;;;;AAcO,SAAS,eAAe,EAAE,QAAQ,EAAE,cAAc,KAAK,EAAuB;;IACnF,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,WAAW,IAAA,kLAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,eAAe,EAAE,GAAG,IAAA,yMAAW;sCAAC,CAAC,QAAqB,MAAM,IAAI;;IAErF,IAAA,wMAAS;oCAAC;YACR,iCAAiC;YACjC,IAAI,CAAC,SAAS,CAAC,iBAAiB;gBAC9B,kLAAK,CAAC,KAAK,CAAC;gBACZ,OAAO,IAAI,CAAC,CAAC,qBAAqB,EAAE,UAAU;gBAC9C;YACF;YAEA,oEAAoE;YACpE,IAAI,eAAe,MAAM;gBACvB,IAAI,CAAC,IAAA,4KAAc,EAAC,MAAM,WAAW;oBACnC,MAAM,aAAa,IAAA,8KAAgB,EAAC;oBACpC,kLAAK,CAAC,KAAK,CAAC;oBACZ,OAAO,IAAI,CAAC;gBACd;YACF;QACF;mCAAG;QAAC;QAAO;QAAiB;QAAM;QAAU;QAAQ;KAAY;IAEhE,kDAAkD;IAClD,IAAI,CAAC,SAAS,CAAC,iBAAiB;QAC9B,OAAO;IACT;IAEA,yEAAyE;IACzE,IAAI,eAAe,QAAQ,CAAC,IAAA,4KAAc,EAAC,MAAM,WAAW;QAC1D,OAAO;IACT;IAEA,iEAAiE;IACjE,qBAAO;kBAAG;;AACZ;GAnCgB;;QACC,gLAAS;QACP,kLAAW;QACa,yMAAW;;;KAHtC","debugId":null}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khaled/Downloads/vin/GlobalVin-master/src/app/dashboard/layout.tsx"],"sourcesContent":["'use client'\n\nimport { Header } from \"@/components/DashboardComponents/Header/Header\"\nimport { Sidebar } from \"@/components/DashboardComponents/Sidebar/Sidebar\"\nimport { ProtectedRoute } from \"@/components/ProtectedRoute/ProtectedRoute\"\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <ProtectedRoute requireRole={true}>\n      <div className=\"flex h-screen\">\n        <Sidebar />\n        <div className=\"flex-1 flex flex-col overflow-hidden\">\n          <Header />\n          <main className=\"flex-1 overflow-auto bg-background\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </ProtectedRoute>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,qBACE,2NAAC,yMAAc;QAAC,aAAa;kBAC3B,cAAA,2NAAC;YAAI,WAAU;;8BACb,2NAAC,2MAAO;;;;;8BACR,2NAAC;oBAAI,WAAU;;sCACb,2NAAC,wMAAM;;;;;sCACP,2NAAC;4BAAK,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAMb;KAlBwB","debugId":null}}]
}