module.exports=[53821,a=>{"use strict";let b=(0,a.i(89682).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],53821)},74359,a=>{"use strict";let b=(0,a.i(89682).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],74359)},22893,a=>{"use strict";let b=(0,a.i(89682).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["Filter",()=>b],22893)},42623,a=>{"use strict";let b=(0,a.i(89682).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],42623)},89742,a=>{"use strict";var b=a.i(43308),c=a.i(86764),d=a.i(183),e=a.i(4948),f=a.i(74359),g=a.i(89682);let h=(0,g.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var i=a.i(51928);let j=(0,g.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),k=(0,g.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),l=(0,g.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var m=a.i(53821),n=a.i(22893),o=a.i(42623);function p(){let[a,g]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)({total:0,carfax:0,autocheck:0,chineseApi:0,contact:0}),{token:z}=(0,d.useSelector)(a=>a.auth),A=(0,c.useCallback)(async()=>{u(!0),w(null);try{let a=await fetch("/api/leads",{headers:{Authorization:`Bearer ${z}`}});if(!a.ok){if(403===a.status)throw Error("You do not have permission to view leads");if(401===a.status)throw Error("Please log in to view leads");throw Error("Failed to fetch leads")}let b=await a.json();g(b.data.leads),y(b.data.stats)}catch(a){w(a instanceof Error?a.message:"Failed to load leads")}finally{u(!1)}},[z]);(0,c.useEffect)(()=>{z&&A()},[z,A]),(0,c.useEffect)(()=>{"all"===r?q(a):q(a.filter(a=>a.source===r))},[a,r]);let B=async a=>{if(confirm("Are you sure you want to delete this lead?"))try{if(!(await fetch(`/api/leads/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${z}`}})).ok)throw Error("Failed to delete lead");A()}catch(a){alert(a instanceof Error?a.message:"Failed to delete lead")}},C=async()=>{alert("To delete all leads, please delete them individually for safety.")},D=a=>{switch(a){case"carfax":return"Carfax API";case"autocheck":return"AutoCheck API";case"chinese-api":return"China Vehicle API";default:return a}};return v?(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[(0,b.jsx)(o.AlertCircle,{className:"w-12 h-12 mx-auto text-red-500 mb-3"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-1",children:"Error"}),(0,b.jsx)("p",{className:"text-red-600",children:v}),(0,b.jsx)("button",{onClick:A,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Try Again"})]})}):(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Lead Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"View and manage all demo requests and inquiries"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition",children:[(0,b.jsx)(l,{size:16}),"Refresh"]}),(0,b.jsxs)("button",{onClick:()=>{let a=new Blob([["Name,Email,Phone,Company,Source,Message,Date",...p.map(a=>`"${a.name}","${a.email}","${a.phone}","${a.company}","${a.source}","${a.message.replace(/"/g,'""')}","${new Date(a.createdAt).toLocaleString()}"`)].join("\n")],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a");b.href=URL.createObjectURL(a),b.download=`leads_${new Date().toISOString().split("T")[0]}.csv`,b.click()},disabled:0===p.length,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:[(0,b.jsx)(m.Download,{size:16}),"Export CSV"]}),(0,b.jsxs)("button",{onClick:C,disabled:0===a.length,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition disabled:opacity-50",children:[(0,b.jsx)(k,{size:16}),"Clear All"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-purple-100 text-purple-600 p-2 rounded-lg",children:(0,b.jsx)(e.Users,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.total}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Leads"})]})]})}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-red-100 text-red-600 p-2 rounded-lg",children:(0,b.jsx)(e.Users,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.carfax}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Carfax"})]})]})}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:(0,b.jsx)(e.Users,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.autocheck}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"AutoCheck"})]})]})}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-orange-100 text-orange-600 p-2 rounded-lg",children:(0,b.jsx)(e.Users,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.chineseApi}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"China API"})]})]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(n.Filter,{size:16,className:"text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Filter by source:"}),(0,b.jsxs)("select",{value:r,onChange:a=>s(a.target.value),className:"bg-card border border-border rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-purple-500",children:[(0,b.jsx)("option",{value:"all",children:"All Sources"}),(0,b.jsx)("option",{value:"carfax",children:"Carfax API"}),(0,b.jsx)("option",{value:"autocheck",children:"AutoCheck API"}),(0,b.jsx)("option",{value:"chinese-api",children:"China Vehicle API"})]})]}),t?(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,b.jsx)(l,{className:"w-8 h-8 animate-spin mx-auto text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading leads..."})]}):0===p.length?(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,b.jsx)(e.Users,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"No leads yet"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"all"===r?"When visitors submit demo requests, they will appear here.":`No leads from ${D(r)} yet.`})]}):(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Contact Info"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Company"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Source"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Message"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Date"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:p.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/30 transition",children:[(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[(0,b.jsx)(f.Mail,{size:12}),(0,b.jsx)("a",{href:`mailto:${a.email}`,className:"hover:text-purple-600",children:a.email})]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[(0,b.jsx)(h,{size:12}),(0,b.jsx)("a",{href:`tel:${a.phone}`,className:"hover:text-purple-600",children:a.phone})]})]})}),(0,b.jsx)("td",{className:"px-4 py-4",children:a.company?(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(i.Building2,{size:14,className:"text-muted-foreground"}),(0,b.jsx)("span",{children:a.company})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"—"})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${(a=>{switch(a){case"carfax":return"bg-red-100 text-red-700";case"autocheck":return"bg-blue-100 text-blue-700";case"chinese-api":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}})(a.source)}`,children:D(a.source)})}),(0,b.jsx)("td",{className:"px-4 py-4 max-w-xs",children:a.message?(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.message}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"—"})}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(j,{size:12}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString()})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(a.createdAt).toLocaleTimeString()})]}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("button",{onClick:()=>B(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete lead",children:(0,b.jsx)(k,{size:16})})})]},a.id))})]})})})]})}a.s(["default",()=>p],89742)}];

//# sourceMappingURL=vin_GlobalVin-master_dd963d10._.js.map